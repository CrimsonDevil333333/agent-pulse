# Agent-Pulse ü¶ûüõ∞Ô∏è

**Agent-Pulse** is a professional-grade, real-time "Mission Control" dashboard designed for headless AI agents. It bridges the visibility gap by providing a live visual broadcast of an agent's internal logic, system vitals, and graphical renders.

---

## üöÄ Key Features

### üß† Live Logic Trace
Real-time streaming of agent thoughts and actions. Every decision made by the agent is broadcasted via **Server-Sent Events (SSE)**, ensuring low-latency updates without page refreshes.
*   **Scrollable History**: The dashboard now supports full vertical scrolling for the entire logic trace buffer (up to the last 100 events).

![Logic Trace](assets/screenshots/logic_trace.png)

### üñºÔ∏è Visual Pulse Buffer (Persistent Canvas)
A dedicated viewport for displaying screenshots, UI mockups, or data visualizations generated by agents. 
*   **Persistence**: The dashboard automatically remembers and reloads the last rendered image on refresh.
*   **Production Serving**: High-speed image streaming directly from the server's RAM disk.

![Dashboard Overview](assets/screenshots/dashboard.png)

### üìä Real-Time System Telemetry
Live hardware vitals (CPU Load, Core Temperature, RAM usage) streamed directly from the host. 
*   **Universal Support**: Built-in compatibility for Raspberry Pi 5 (`vcgencmd`) with automated fallbacks for generic Linux distributions.

### üé≠ Aura Manager (Identity Engine)
A revolutionary way to manage AI personas and UI branding.
*   **Reactive Personalities**: Switch between modes (Standard, Expert Dev, Cyber Ninja, Deep Thinker) with a single click.
*   **Aura Confirmation**: Agents automatically acknowledge identity shifts in the live trace.
*   **Global Sync**: Swapping a persona instantly updates the dashboard theme and agent response signatures.
*   **State Persistence**: Your selected identity survives refreshes and server restarts.

![Aura Manager](assets/screenshots/aura_manager.png)

### ‚öôÔ∏è System Settings
The command center for fine-tuning the broadcast experience.
*   **Configurable Buffer**: (Design Pending) Real-time adjustments for history limits and SSE heartbeats.
*   **Hardware Hooks**: Direct access to vitals scraping frequency and logging levels.

![Settings View](assets/screenshots/settings.png)

---

## üõ†Ô∏è Architecture: Under the Hood

### 1. The React Frontend
Built with **Next.js 16 (App Router)** and **Tailwind CSS**. It uses a "Sequential Hydration" model:
*   **Hydration Phase**: On initial load, the app fetches Aura state, the last visual render, and historical logs via REST APIs.
*   **Stream Phase**: Once hydrated, it opens an SSE connection to the `/api/pulse` stream for real-time reactive updates.

### 2. The SSE Bridge (Backend)
A high-performance Node.js stream controller handles incoming "Pulses" from any agent and broadcasts them to all connected clients. It manages:
*   **History Buffering**: Automatically saves the last 100 events to `pulse_history.json`.
*   **Visual State**: Maintains a pointer to the most recent canvas render in `last_visual.json`.
*   **Aura State**: Stores the active persona profile in `last_aura.json`.

### 3. The Auto-Pulse & Monitoring Daemons
Three background services ensure the system stays alive and communicative:
*   **`pulse_daemon.sh`**: A "Global Monitor" that tails a system-level log file (`system_pulse.log`). Any string written to this log by *any* agent or script is automatically broadcasted.
*   **`vitals_daemon.sh`**: Scrapes hardware stats every 5 seconds and pulses them to the UI.
*   **`aura_monitor.sh`**: Watches for identity shifts via the dashboard and triggers internal agent acknowledgments.

---

## üì° The Pulse Protocol (For Agents & People)

Agent-Pulse is **Agent-Agnostic**. Any script‚Äîregardless of language‚Äîcan communicate with the dashboard via simple HTTP POST requests to `http://localhost:8088/api/pulse`.

### A. Streaming a Thought (Log)
```bash
curl -X POST http://localhost:8088/api/pulse \
  -H "Content-Type: application/json" \
  -d '{
    "agent": "My-Bot",
    "action": "THINK",
    "message": "Analyzing the user request...",
    "type": "log"
  }'
```

### B. Updating the Canvas (Visual)
The agent must save the image to `/mnt/ramdisk/` (or the configured log directory) and then pulse the filename:
```bash
curl -X POST http://localhost:8088/api/pulse \
  -H "Content-Type: application/json" \
  -d '{
    "type": "visual",
    "payload": "latest_screenshot.png"
  }'
```

### C. Triggering an Identity Shift (Aura)
```bash
curl -X POST http://localhost:8088/api/pulse \
  -H "Content-Type: application/json" \
  -d '{
    "type": "aura",
    "payload": {
      "theme": "#ff3e00",
      "persona": "Expert Dev Node",
      "mood": "Focused"
    }
  }'
```

---

## üì¶ Setup & Deployment

1.  **Install Dependencies**:
    ```bash
    npm install
    ```
2.  **Build Production Bundle**:
    ```bash
    npm run build
    ```
3.  **Start Production Server**:
    ```bash
    npx next start -p 8088
    ```
4.  **Launch Background Daemons**:
    ```bash
    ./scripts/pulse_daemon.sh &
    ./scripts/vitals_daemon.sh &
    ./scripts/aura_monitor.sh &
    ```

---

## üõ°Ô∏è License & Credits
**MIT License**. Conceptualized and built by **Satyaa** & **Clawdy**. Designed for the AI agent community. ü¶ûüõ∞Ô∏è
